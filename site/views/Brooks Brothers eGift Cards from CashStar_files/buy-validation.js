function is_float(e){return+e===e&&!!(e%1)}function matchesPlaceholderText(e,t){$element=$(t);var a=$element.attr("name"),r=jsonData.placeholders[a],o=r===e;return!o}function is_proper_length(e){var t=e.split("\n").length;return t<=limits.MAX_LINES_FOR_MESSAGE&&e.length<=limits.MAX_CHARS_FOR_MESSAGE}$.validator.addMethod("is_float",function(e,t){return!is_float(parseFloat($("#amount").val()))}),$.validator.addMethod("phone_number",function(e,t){return this.optional(t)||/[\s\d-]/.test(e)&&e.replace(/[^\d]/g,"").length>=10},gettext("Enter a valid phone number")),$.validator.addMethod("is_cart_maxed",function(e,t){var a=parseInt($("#amount").val()),r=jsonData.cart_total,o=jsonData.max_transaction_amount;return a+r>o?!1:!0}),$.validator.addMethod("matchesPlaceholderText",matchesPlaceholderText);var limits={MAX_LINES_FOR_MESSAGE:13,MAX_CHARS_FOR_MESSAGE:250},not_in_crop_mode=function(e){var t="none"!=$("#photo-crop").css("display")&&"PHOTO"==$("#display_type").val();return!t},uyo_object_selected=function(e){var t=[];if("FACEPLATES"==e)return!0;"VIDEO"==e?(t=$("input[name=video_upload]"),(0===t.length||""===t.val())&&(t=$("input[name=video_capture]"))):"PHOTO"==e&&(t=$("input[name=custom_faceplate]"));var a=0!==t.length;if(a){var r=""!==t.val(),o=a&&r;return o}return!1};$.validator.addMethod("not_in_crop_mode",not_in_crop_mode,gettext("Please save your cropped image or choose another faceplate design.")),$.validator.addMethod("is_proper_length",function(e,t){return is_proper_length(e)},interpolate(gettext("Please enter no more than %(MAX_LINES_FOR_MESSAGE)s lines and %(MAX_CHARS_FOR_MESSAGE)s characters."),limits,!0));var uyoImageErrorMessage=gettext("Please attach an image to your %(egcLabel)s"),uyoImageAndVideoErrorMessage=gettext("Please attach a video or image to your %(egcLabel)s"),uyoErrorMessage=jsonData.videoEnabled?uyoImageAndVideoErrorMessage:uyoImageErrorMessage;$.validator.addMethod("uyo_object_selected",uyo_object_selected,interpolate(uyoErrorMessage,{egcLabel:jsonData.egcLabel},!0)),$.validator.addMethod("check_recipient_region",function(e,t){return""!=$("#plastic-recipient_region").val()},gettext("A State or Province is required.")),$(document).ready(function(){var e=!1;$("#buy-buttons button").click(function(){e=!0}),$('input[name="amount"]').on("focusout keyup",function(e){e.stopPropagation()});var t=({currency_symbol:jsonData.currency_symbol,min_card_value:jsonData.min_card_value,max_card_value:jsonData.max_card_value},gettext("Please enter an amount between %(currency_symbol)s%(min_card_value)s and %(currency_symbol)s%(max_card_value)s.")),a=gettext("Please choose a lower gift card amount. The maximum total order amount is %(max_transaction_amount)s."),r=gettext("Please enter no more than %(MAX_LINES_FOR_MESSAGE)s lines and %(MAX_CHARS_FOR_MESSAGE)s characters.");$("#buy-form").validate({rules:{name:{required:!0,matchesPlaceholderText:!0},message:{is_proper_length:!0},from_name:{required:!0,matchesPlaceholderText:!0},email:{required:!0,email:!0,matchesPlaceholderText:!0},home_name:{required:!0,matchesPlaceholderText:!0},home_email:{required:!0,email:!0},amount:{required:!0,number:!0,range:[jsonData.min_card_value,jsonData.max_card_value],is_float:!0,is_cart_maxed:!0},faceplate_code:{not_in_crop_mode:!0},display_type:{uyo_object_selected:!0},recipient_sms_number:{required:!1,phone_number:!0}},messages:{name:gettext("A recipient name is required for your gift."),from_name:gettext("A sender name is required for your gift."),email:gettext("Please enter a valid email address."),home_name:gettext("A recipient name is required for your gift."),home_email:gettext("Please enter a valid email address."),amount:{required:gettext("Please enter an amount for your gift."),is_cart_maxed:interpolate(a,jsonData,!0),number:gettext("Please enter only integer numbers. No decimals or letters are allowed."),range:interpolate(t,jsonData,!0),is_float:gettext("Only integer values are allowed.")},message:{is_proper_length:interpolate(r,limits,!0),matchesPlaceholderText:gettext("Please enter a message")},sms_from_name:gettext("A sender name is required for your gift."),sms_name:gettext("A recipient name is required for your gift.")},ignore:".ignore-js-validate",submitHandler:function(e){$("#hide-wrap").hide(),$("#processing").fadeIn(500),$("body").animate({scrollTop:0},"fast").trigger("formValidated"),e.submit()},showErrors:function(t,a){var r;t.amount?(r=t.amount,show_jgrowl_message(r,"error",!1)):t.faceplate_code||t.display_type?(r=t.faceplate_code||t.display_type,show_jgrowl_message(r,"error",!0)):this.defaultShowErrors(),e&&a.length>0&&$.ajax("/tracker/report/",{type:"POST",data:t}),e=!1}}),jQuery.extend(jQuery.validator.messages,{required:gettext("This field is required.")})});
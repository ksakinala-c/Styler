var TabView=TabView||{};!function(e){"use strict";TabView=Backbone.View.extend({el:"#design",events:{"click .display_tab":"clickDisplayTab"},initialize:function(e){Backbone.View.prototype.initialize.apply(this,arguments),this.card=e.card,this.availableAccessories=e.availableAccessories,this.viewModel=e.viewModel,this.faceplate=e.faceplate,this.denomination=e.denomination,this.listenTo(this.viewModel,"change:display_type",this.selectTab),this.listenTo(this.viewModel,"change:display_type",this.setFormDisplayType),this.listenTo(this.viewModel,"change:multipack_display",this.toggleTabView),this.viewModel.get("is_plastic_page")&&this.viewModel.get("photo_enabled_plastic")&&this.listenTo(this.viewModel,"change:display_type",this.setUYOPAccessoryCode),this.views={FACEPLATES:new DesignView({viewModel:this.viewModel,faceplate:this.faceplate,denomination:this.denomination})},(this.viewModel.get("photo_enabled")||this.viewModel.get("photo_enabled_plastic"))&&(this.views.PHOTO=new PhotoView({card:this.card,faceplate:this.faceplate,viewModel:this.viewModel})),this.viewModel.get("video_enabled")&&!this.viewModel.get("is_plastic_page")&&(this.views.VIDEO=new VideoView({faceplate:this.faceplate,viewModel:this.viewModel})),this.tabTransitionConfig(),this.getInitDisplayType()},tabTransitionConfig:function(){this.$("ul#design-tabs").tabs("div#design-panes > div",{fadeInSpeed:500,fadeOutSpeed:0,effect:"fade"})},getInitDisplayType:function(){var e=this.$('input[name="display_type"]').val();void 0!==e&&this.viewModel.set("display_type",e)},clickDisplayTab:function(e){this.viewModel.set("display_type",this.$(e.currentTarget).data("value"))},selectTab:function(){var e=this.viewModel.get("display_type"),i=this.$("li a.current").data("value");e!==i&&this.$el.find('li a[data-value="'+e+'"]').click()},setFormDisplayType:function(){this.$('input[name="display_type"]').val(this.viewModel.get("display_type"))},setUYOPAccessoryCode:function(){var e=this.availableAccessories.findWhere({category:"UYOP"});e&&"PHOTO"===this.viewModel.get("display_type")?this.card.addAccessoryByCode(e.id):e&&"PHOTO"!==this.viewModel.get("display_type")&&this.card.removeAccessoryByCode(e.id)},toggleTabView:function(){this.viewModel.get("multipack_display")?this.$el.hide():this.$el.show()}})}(jQuery);
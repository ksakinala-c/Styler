var ElectiveAccessoriesView;!function(e){"use strict";ElectiveAccessoriesView=Backbone.View.extend({el:"#accessory",events:function(){return _.extend({},Backbone.View.prototype.events,{"click #toggleAccessory":"toggleAccessoryHandler"})},initialize:function(e){Backbone.View.prototype.initialize.call(this,e),this.card=e.card,this.availableAccessories=e.availableAccessories,this.viewModel=e.viewModel,this.template=JST.accessories,this.viewModel.get("is_plastic_page")&&this.listenTo(this.viewModel,"change:multipack_display",this.multipackAccessoryToggle)},render:function(){var i=this;if(_.each(['input[name="accessory_codes"]'],function(t){var s=e(t).val();if(""!==s&&void 0!==s){var c=s.split("|");_.each(c,function(e){i.card.addAccessoryByCode(e)})}}),!i.model){var t=i.availableAccessories.filter(function(e){return"UYOP"!==e.get("category")});t.length>0&&(i.model=t[0])}var s=null!=i.card.get("accessories").get(i.model),c=_.extend({active:s},i.model.toJSON());return i.$el.html(i.template(c)),i},toggleAccessoryHandler:function(e){e=e||event,e.preventDefault(),this.card.toggleAccessoryByCode(this.model.id),this.render()},multipackAccessoryToggle:function(){var e=this.viewModel.get("multipack_display");e?(this.$el.hide(),this.card.get("accessories").length>0&&this.toggleAccessoryHandler()):this.$el.show()}})}(jQuery);